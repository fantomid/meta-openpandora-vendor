# do not edit this file, it will be overwritten on update

ACTION!="add", GOTO="drivers_end"

# Pandora hack:
# On later kernels we have lots of modules and running modprobe becomes
# expensive and slows boot a lot.
# Prevent it from being run for stuff we know is compiled in
# pandora's kernel or is not needed in general
ACTION=="add", ENV{MODALIAS}=="platform:*" GOTO="drivers_end"
ACTION=="add", ENV{MODALIAS}=="mmc:block" GOTO="drivers_end"
ACTION=="add", ENV{MODALIAS}=="sdio:c00v104Cd9066" GOTO="drivers_end"
ACTION=="add", DEVPATH=="*twl4030_keypad*" GOTO="drivers_end"
ACTION=="add", DEVPATH=="*twl4030_pwrbutton*" GOTO="drivers_end"
ACTION=="add", DEVPATH=="*gpio-keys*" GOTO="drivers_end"
ACTION=="add", DEVPATH=="*/i2c-3/3-006[67]*" GOTO="drivers_end"

DRIVER!="?*", ENV{MODALIAS}=="?*", RUN+="/sbin/modprobe -b $env{MODALIAS}"
SUBSYSTEM=="tifm", ENV{TIFM_CARD_TYPE}=="SD", RUN+="/sbin/modprobe -b tifm_sd"
SUBSYSTEM=="tifm", ENV{TIFM_CARD_TYPE}=="MS", RUN+="/sbin/modprobe -b tifm_ms"
SUBSYSTEM=="memstick", RUN+="/sbin/modprobe -b --all ms_block mspro_block"
SUBSYSTEM=="i2o", RUN+="/sbin/modprobe -b i2o_block"
SUBSYSTEM=="scsi", ENV{DEVTYPE}=="scsi_device", TEST!="[module/sg]", RUN+="/sbin/modprobe -b sg"
SUBSYSTEM=="module", KERNEL=="parport_pc", RUN+="/sbin/modprobe -b ppdev"

LABEL="drivers_end"
